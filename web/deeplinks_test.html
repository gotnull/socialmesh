<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Deep Link Test Console — Socialmesh</title>
  <meta name="description" content="Test deep links by scanning QR codes on a real device.">
  <meta name="robots" content="noindex, nofollow">

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="favicon.png">

  <!-- Fonts (same as landing page) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=Inter:wght@400;500;600;700&display=swap"
    rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

  <!-- QR Code Generator Library (reliable, battle-tested) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

  <!-- Reuse landing page styles + test console specific styles -->
  <link rel="stylesheet" href="landing.css?v=2">
  <link rel="stylesheet" href="deeplinks_test.css">
</head>

<body>
  <!-- Animated Background (reused from landing) -->
  <div class="mesh-bg"></div>
  <div class="grid-overlay"></div>

  <!-- Navigation -->
  <nav>
    <div class="container">
      <a href="/" class="logo">
        <img src="images/app-icon.png" alt="Socialmesh" class="logo-img">
        <span class="logo-text">Socialmesh</span>
      </a>
      <div class="nav-cta">
        <a href="/" class="btn btn-secondary">
          <span class="material-icons btn-icon">home</span>
          Back to Home
        </a>
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <main class="test-console">
    <div class="container">
      <!-- Header -->
      <header class="console-header reveal-blur">
        <h1>
          <span class="material-icons header-icon">link</span>
          Deep Link Test Console
        </h1>
        <p class="header-description">
          Scan QR codes with your phone camera to test deep link handling on a real device.
          All supported link formats are listed below with their expected destinations.
        </p>
      </header>

      <!-- Filters -->
      <section class="filters reveal">
        <div class="search-box">
          <span class="material-icons search-icon">search</span>
          <input type="text" id="searchInput" placeholder="Search by name, path, or destination...">
        </div>

        <div class="filter-buttons">
          <button class="filter-btn active" data-filter="all">All</button>
          <button class="filter-btn" data-filter="custom-scheme">Custom Scheme</button>
          <button class="filter-btn" data-filter="universal-link">Universal Links</button>
          <button class="filter-btn" data-filter="legacy">Legacy</button>
          <button class="filter-btn" data-filter="invalid">Invalid (Error Tests)</button>
        </div>

        <div class="stats">
          <span id="visibleCount">0</span> of <span id="totalCount">0</span> test cases
        </div>
      </section>

      <!-- Test Cases Grid -->
      <section id="testCasesGrid" class="test-cases-grid">
        <!-- Populated by JavaScript -->
      </section>

      <!-- Loading State -->
      <div id="loadingState" class="loading-state">
        <div class="spinner"></div>
        <p>Loading test cases...</p>
      </div>

      <!-- Error State -->
      <div id="errorState" class="error-state hidden">
        <span class="material-icons error-icon">error_outline</span>
        <p>Failed to load test cases.</p>
        <button class="btn btn-primary" onclick="loadTestCases()">Retry</button>
      </div>

      <!-- Footer Info -->
      <footer class="console-footer reveal">
        <div class="footer-info">
          <h3>How to Test</h3>
          <ol>
            <li>Install Socialmesh on your iOS or Android device</li>
            <li>Open your phone's camera app</li>
            <li>Point it at a QR code above</li>
            <li>Tap the notification to open the link in Socialmesh</li>
            <li>Verify you land on the expected screen</li>
          </ol>
        </div>
        <div class="footer-info">
          <h3>Deep Link Formats</h3>
          <ul>
            <li><code>socialmesh://</code> — Custom scheme (iOS & Android)</li>
            <li><code>https://socialmesh.app/share/</code> — Universal links</li>
            <li><code>meshtastic://</code> — Legacy scheme (backwards compat)</li>
            <li><code>https://meshtastic.org/e/#</code> — Legacy channel format</li>
          </ul>
        </div>
      </footer>
    </div>
  </main>

  <!-- Scripts -->
  <script src="deeplinks_test.js"></script>
</body>

</html>
